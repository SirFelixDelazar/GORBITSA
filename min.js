var g_program=[],g_ram=[],g_register=0;function compile(){const a=document.getElementById("in").value.replace(/(\n|\t|\r|\v)/g," ").replace(/\s\s+/g," ").trim();if(""==a)return console.error("the program is empty"),alert("the program is empty"),!1;const b=a.split(" ");if(checkSyntax(b)){for(let a=0;255>a;a++)g_ram[a]=0;for(let a=0;255>a;a++)g_program[a]=0;g_register=0,b.forEach((a,b)=>{g_program[b]=a}),run()}}function run(){for(let a=0;!0&&!(0==g_program[a]);){if(g_program[a].match(/^G/)){g_register=g_ram[getArg(g_program[a])],a++;continue}if(g_program[a].match(/^O/)){g_ram[getArg(g_program[a])]=g_register,a++;continue}if(g_program[a].match(/^R$/)){let b=0;g_register=255<(b=parseInt(prompt("input")))&&0>b?0:b,a++;continue}if(g_program[a].match(/^B/)){0==g_register?a=getArg(g_program[a]):a++;continue}if(g_program[a].match(/^I/)){g_register+=getArg(g_program[a]),g_register%=256,a++;continue}if(g_program[a].match(/^T$/)){alert(g_register),a++;continue}if(g_program[a].match(/^S/)){g_register=getArg(g_program[a]),a++;continue}if(g_program[a].match(/^A/)){g_register+=g_ram[getArg(g_program[a])],g_register%=256,a++;continue}if(g_program[a].match(/^g/)){g_register=g_ram[g_ram[getArg(g_program[a])]],a++;continue}if(g_program[a].match(/^o/)){g_ram[g_ram[getArg(g_program[a])]]=g_register,a++;continue}if(g_program[a].match(/^r/)){let b=0;g_ram[getArg(g_program[a])]=255<(b=parseInt(prompt("input")))&&0>b?0:b,a++;continue}if(g_program[a].match(/^b/)){0==g_register?a=g_ram[getArg(g_program[a])]:a++;continue}if(g_program[a].match(/^i/)){g_ram[getArg(g_program[a])]+=g_register,g_ram[getArg(g_program[a])]%=256,a++;continue}if(g_program[a].match(/^t/)){alert(g_ram[getArg(g_program[a])]),a++;continue}if(g_program[a].match(/^s/)){g_register^=g_ram[getArg(g_program[a])],a++;continue}if(g_program[a].match(/^a/)){g_register+=g_ram[g_ram[getArg(g_program[a])]],g_register%=256,a++;continue}}}function checkSyntax(a){if(256<a.length)return console.error("Program is too big >> length is",a.length),!1;let b=!0;return(a.forEach(a=>{isValidStatement(a)||(console.error(a,"<< invalid syntax"),alert(a + "<< invalid syntax"),b=!1)}),!!b)&&(console.log("Program is correct"),!0)}function getArg(a){return parseInt(a.substring(1))}function isValidStatement(a){return a.match(/^((R|T)|([GOBISAgorbitsa]([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])))$/)}
