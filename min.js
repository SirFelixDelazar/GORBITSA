var g_program=[],g_ram=[],g_register=0;function compile(){const a=document.getElementById("in").value.replace(/(\n|\t|\r|\v)/g," ").replace(/\s\s+/g," ").trim();if(""==a)return console.error("Program is empty"),!1;const b=a.split(" ");if(checkSyntax(b,!0)){for(let a=0;255>a;a++)g_ram[a]=0;for(let a=0;255>a;a++)g_program[a]=0;b.forEach((a,b)=>{setProgram(a,b)}),run()}}function run(){for(let a=0;!0&&!(0==g_program[a]);){if(g_program[a].match(/^G/)){let b;b=2==g_program[a].length?parseInt(g_program[a].charAt(1)):3==g_program[a].length?parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2))):parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2)).concat(g_program[a].charAt(3))),g_register=g_ram[b],a++}if(g_program[a].match(/^O/)){let b;b=2==g_program[a].length?parseInt(g_program[a].charAt(1)):3==g_program[a].length?parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2))):parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2)).concat(g_program[a].charAt(3))),g_ram[b]=g_register,a++}if(g_program[a].match(/^R$/)){let b=0;g_register=255<(b=parseInt(prompt("input")))&&0>b?0:b,a++;continue}if(g_program[a].match(/^B/))if(0==g_register){let b;b=2==g_program[a].length?parseInt(g_program[a].charAt(1)):3==g_program[a].length?parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2))):parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2)).concat(g_program[a].charAt(3))),a=b;continue}else{a++;continue}if(g_program[a].match(/^I/)){let b;b=2==g_program[a].length?parseInt(g_program[a].charAt(1)):3==g_program[a].length?parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2))):parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2)).concat(g_program[a].charAt(3))),g_register+=b,g_register%=256,a++;continue}if(g_program[a].match(/^T$/)){alert(g_register),a++;continue}if(g_program[a].match(/^S/)){let b;b=2==g_program[a].length?parseInt(g_program[a].charAt(1)):3==g_program[a].length?parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2))):parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2)).concat(g_program[a].charAt(3))),g_register=b,a++;continue}if(g_program[a].match(/^A/)){let b;b=2==g_program[a].length?parseInt(g_program[a].charAt(1)):3==g_program[a].length?parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2))):parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2)).concat(g_program[a].charAt(3))),g_register+=g_ram[b],g_register%=256,a++;continue}if(g_program[a].match(/^g/)){let b;b=2==g_program[a].length?parseInt(g_program[a].charAt(1)):3==g_program[a].length?parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2))):parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2)).concat(g_program[a].charAt(3))),g_register+=g_ram[g_ram[b]],g_register%=256,a++;continue}if(g_program[a].match(/^o/)){let b;b=2==g_program[a].length?parseInt(g_program[a].charAt(1)):3==g_program[a].length?parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2))):parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2)).concat(g_program[a].charAt(3))),g_ram[g_ram[b]]+=g_register,g_ram[g_ram[b]]%=256,a++;continue}if(g_program[a].match(/^r/)){let b=2==g_program[a].length?parseInt(g_program[a].charAt(1)):3==g_program[a].length?parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2))):parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2)).concat(g_program[a].charAt(3)));let c=0;g_ram[b]=255<(c=parseInt(prompt("input")))&&0>c?0:c,a++;continue}if(g_program[a].match(/^b/))if(0==g_register){let b;b=2==g_program[a].length?parseInt(g_program[a].charAt(1)):3==g_program[a].length?parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2))):parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2)).concat(g_program[a].charAt(3))),a=g_ram[b];continue}else{a++;continue}if(g_program[a].match(/^i/)){let b;b=2==g_program[a].length?parseInt(g_program[a].charAt(1)):3==g_program[a].length?parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2))):parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2)).concat(g_program[a].charAt(3))),g_ram[b]+=g_register,g_ram[b]%=256,a++;continue}if(g_program[a].match(/^t/)){let b;b=2==g_program[a].length?parseInt(g_program[a].charAt(1)):3==g_program[a].length?parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2))):parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2)).concat(g_program[a].charAt(3))),alert(g_ram[b]),a++;continue}if(g_program[a].match(/^s/)){let b;b=2==g_program[a].length?parseInt(g_program[a].charAt(1)):3==g_program[a].length?parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2))):parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2)).concat(g_program[a].charAt(3))),g_register=b^g_register,a++;continue}if(g_program[a].match(/^a/)){let b;b=2==g_program[a].length?parseInt(g_program[a].charAt(1)):3==g_program[a].length?parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2))):parseInt(g_program[a].charAt(1).concat(g_program[a].charAt(2)).concat(g_program[a].charAt(3))),g_register+=g_ram[g_ram[b]],g_register%=256,a++;continue}}}function checkSyntax(a,b){if(256<a.length)return console.error("Program is too big >> length is",a.length),!1;let c=!0;return(a.forEach(a=>{isValidStatement(a,b)||(console.error(a,"<< invalid syntax"),c=!1)}),!!c)&&(console.log("Program is correct"),!0)}function setProgram(a,b){return!(255<b||0>b)&&(g_program[b]=a,!0)}function isValidStatement(a,b){return b?a.match(/^((R|T)|([GOBISAgorbitsa]([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])))$/):a.match(/^((R|T)|([GOBISA]([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])))$/)}